/* app/globals.css — DARK THEME with bespoke isometric pattern (fixed) */

/* Tailwind v4 core */
@import "tailwindcss";

/* ---------- Design-time (Tailwind) ---------- */
@theme {
  --brand: var(--color-primary);
  --brand-foreground: #0b1220;
  --color-primary: var(--gold-500);
  --color-accent: var(--blue-200);
  --color-danger: #e11d48;
}

/* ---------- Runtime tokens ---------- */
@layer base {
  :root {
    /* Brand palette (dark) */
    --bg-900:   #2B3B45; /* app background */
    --surf-800: #283c63; /* cards / surfaces */
    --blue-300: #b0d1fa; /* light blue (ui hints/links) */
    --blue-100: #e0edfd; /* lighter blue (muted surfaces) */
    --gold-500: #dbc078; /* primary accent for buttons/links */
    --beige-200:#f2ead1; /* optional soft beige for highlights */

    /* Core aliases */
    --color-bg:      var(--bg-900);
    --color-surface: var(--surf-800);
    --color-muted:   #23323b;          /* hover rows / subtle fills */
    --color-border:  #1f2a31;          /* borders on dark */
    --color-ink:     #ffffff;          /* primary text */
    --color-ink-2:   #e6eefc;          /* secondary text */
    --color-ink-3:   #c5d8ff;          /* tertiary */
    --color-primary: var(--gold-500);  /* gold accent */
    --color-accent:  var(--blue-300);
    --color-warn:    #fbbf24;
    --color-danger:  #e11d48;

    /* Layout / radii / shadows / focus */
    --radius-xs: .375rem;
    --radius-sm: .5rem;
    --radius-md: .75rem;
    --radius-lg: 1rem;
    --shadow-0: 0 1px 2px rgb(0 0 0 / .35);
    --shadow-1: 0 6px 18px rgb(0 0 0 / .35);
    --shadow-2: 0 12px 30px rgb(0 0 0 / .45);
    --content-max: 1200px;
    --topbar-h: 64px;
    --ring: 0 0 0 3px rgb(219 192 120 / .35); /* gold focus ring */

    /* Legacy aliases (keep) */
    --primary: var(--color-primary);
    --border: var(--color-border);
    --surface: var(--color-surface);
    --surface-2: #22324a;
    --muted-foreground: var(--color-ink-3);
  }

  :root { color-scheme: dark; }
  html, body { background-color: var(--color-bg); color: var(--color-ink); }
  body {
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  }

  /* Headings use gold for brand accent */
  h1, h2, h3 { color: var(--color-primary); }

  /* Links */
  a { color: var(--color-primary); }
  .link {
    color: var(--color-primary);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  ::selection { background: color-mix(in oklab, var(--color-primary) 35%, black); }

  :where(button, a, input, select, textarea, [role="button"], [tabindex]) { outline: none; }
  :where(button, a, input, select, textarea, [role="button"], [tabindex]):focus-visible { box-shadow: var(--ring); }

  /* Soft scrollbars (dark) */
  *::-webkit-scrollbar { width: 10px; height: 10px; }
  *::-webkit-scrollbar-thumb { background: color-mix(in oklab, var(--color-ink-3) 40%, black); border-radius: 999px; }
}

/* ---------- Components (small design system) ---------- */
@layer components {
  /* Buttons (base) */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-[--radius-md]
           px-4 py-2 text-sm font-medium border transition-all duration-150;
    background-color: var(--color-surface);
    color: var(--color-ink);
    border-color: var(--color-border);
    box-shadow: var(--shadow-0);
  }
  .btn:hover { @apply -translate-y-[0.5px]; box-shadow: var(--shadow-1); }
  .btn:active { @apply translate-y-0; }
  .btn:disabled { @apply opacity-60 pointer-events-none; }

  .btn-primary {
    @apply border-transparent;
    background-color: var(--color-primary);
    color: #0b1220;
    box-shadow: var(--shadow-1);
  }
  .btn-subtle {
    @apply border-transparent;
    background-color: color-mix(in oklab, var(--color-surface) 85%, black);
    color: var(--color-ink-2);
  }
  .btn-danger {
    @apply border-transparent;
    background-color: var(--color-danger);
    color: #fff;
    box-shadow: var(--shadow-1);
  }
  .btn-ghost { @apply border-transparent; background-color: transparent; color: var(--color-ink-2); }
  .btn-icon {
   @apply inline-flex items-center justify-center rounded-[--radius-md] p-2 border;
    background-color: var(--color-surface);
    color: var(--color-ink);
    border-color: var(--color-border);
  }
  .btn-icon:hover { background-color: var(--color-muted); }

  /* Chips */
  .chip {
    @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs border;
    background-color: var(--color-surface);
    border-color: var(--color-border);
    color: var(--color-ink-2);
  }
  .chip--primary { background-color: color-mix(in oklab, var(--color-primary) 12%, var(--color-bg)); color: #0b1220; border-color: transparent; }

  /* Card */
  .card {
    @apply rounded-[--radius-lg] border;
    background-color: var(--color-surface);
    border-color: var(--color-border);
    box-shadow: var(--shadow-0);
  }
  .card-header { @apply px-5 py-4 border-b flex items-center justify-between; border-color: var(--color-border); color: var(--color-ink-2); }
  .card-body   { @apply p-5; }
  .card-footer { @apply px-5 py-4 border-t; border-color: var(--color-border); }

  /* Inputs */
  .input, .select, .textarea {
    @apply w-full rounded-[--radius-md] border px-3.5 py-2.5 text-sm;
    background-color: color-mix(in oklab, var(--color-surface) 80%, black);
    border-color: var(--color-border);
    color: var(--color-ink);
    box-shadow: var(--shadow-0);
  }
  .input::placeholder, .select::placeholder, .textarea::placeholder { color: var(--color-ink-3); }
  .select { @apply pr-9; }
  .field-label { @apply text-sm font-medium mb-1.5; color: var(--color-ink-2); }
  .field-row  { @apply flex items-center gap-3; }

  /* Toolbar */
  .toolbar { @apply h-[--topbar-h] flex items-center justify-between; }

  /* Modal */
  .modal-backdrop { @apply fixed inset-0; background-color: rgba(0,0,0,.5); backdrop-filter: blur(6px); }
  .modal {
    @apply fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[min(560px,calc(100vw-2rem))] rounded-[--radius-lg] border;
    background-color: var(--color-surface);
    border-color: var(--color-border);
    box-shadow: var(--shadow-2);
  }
  .modal-header { @apply px-5 py-4 border-b; border-color: var(--color-border); color: var(--color-ink); }
  .modal-body   { @apply p-5; }
  .modal-actions{ @apply px-5 py-4 border-t flex justify-end gap-2; border-color: var(--color-border); }
}

/* ---------- Utilities ---------- */
@layer utilities {
  .container-px { @apply px-4 sm:px-6 lg:px-8; }
  .section-title { @apply text-xs font-semibold tracking-wide uppercase; color: var(--color-ink-3); }
  .glass { backdrop-filter: blur(12px); }
  .elev-0 { box-shadow: var(--shadow-0); }
  .elev-1 { box-shadow: var(--shadow-1); }
  .elev-2 { box-shadow: var(--shadow-2); }

  .is-selected { @apply ring-2 ring-offset-2 rounded-[--radius-lg]; }
  .is-selected { --tw-ring-color: var(--color-primary); --tw-ring-offset-color: var(--color-bg); }

  .hoverable   { @apply transition-colors; background-color: transparent; }
  .hoverable:hover { background-color: color-mix(in oklab, var(--color-surface) 65%, black); }

  /* --- FIXED: bespoke isometric cubes pattern (pure CSS, encoded SVG) --- */
  .pattern-iso3d-elite {
    /* tile size — use px units (try 240px / 320px / 400px) */
    --cube-size: 320px;

    background-color: var(--color-bg);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='320' viewBox='0 0 320 320'%3E%3Cdefs%3E%3Cg id='c'%3E%3Cpolygon points='160,20 300,100 300,220 160,300 20,220 20,100' fill='none' stroke='%23ffffff' stroke-opacity='0.07' stroke-width='1.2'/%3E%3Cpolygon points='160,20 300,100 160,180 20,100' fill='%23ffffff' fill-opacity='0.03'/%3E%3Cpolygon points='300,100 300,220 160,300 160,180' fill='%23000000' fill-opacity='0.12'/%3E%3Cpolygon points='160,180 160,300 20,220 20,100' fill='none' stroke='%23ffffff' stroke-opacity='0.07' stroke-width='1.2'/%3E%3C/g%3E%3C/defs%3E%3Cuse href='%23c' x='0' y='0'/%3E%3Cuse href='%23c' x='-160' y='-100'/%3E%3Cuse href='%23c' x='160' y='-100'/%3E%3Cuse href='%23c' x='-160' y='100'/%3E%3Cuse href='%23c' x='160' y='100'/%3E%3C/svg%3E");
    background-size: var(--cube-size) var(--cube-size);
    background-position: 0 0;
    background-repeat: repeat;
  }
}

/* ---- Topbar text visibility override (scoped) ---- */
@layer components {
  header[role="banner"] a,
  header[role="banner"] [data-slot="label"] { color: var(--color-ink); fill: var(--color-ink); }
  header[role="banner"] a[data-variant="brand"],
  header[role="banner"] a[data-variant="nav"],
  header[role="banner"] [data-variant="brand"] [data-slot="label"],
  header[role="banner"] [data-variant="nav"] [data-slot="label"] {
    color: var(--color-primary) !important; fill: var(--color-primary) !important;
  }
}

